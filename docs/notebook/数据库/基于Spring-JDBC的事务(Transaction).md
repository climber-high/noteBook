### 基于Spring-JDBC的事务(Transaction)

在业务方法之前添加**@Transactional**注解，就可以保证该方法是以事务的方式来运行的，如果执行过程中出错，就会自动回滚，如果全部执行结束也没有出错，则会自动提交！

>在框架中，关于事务的执行机制大致是：

```
try {
    调用业务方法
    提交(commit)
} catch (RuntimeException e) {
    回滚(rollback)
}
```

所以，为了保证事务机制能够生效，必须：

1. 所有增删改操作后，必须及时判断受影响的行数，如果受影响的行数不是预期值，应该抛出RuntimeException或其子孙类异常；

2. 如果某个业务涉及2次或更多次增删改(例如2次Update，或1次Delete加1次Update，或1次Insert加1次Delete)，必须在业务方法之前添加@Transactional注解！

**另外，该注解也可以添加在业务类的声明之前，则表示该类中所有业务方法都是以事务的方式来运行的！一般没有这个必要，所以，在需要使用事务的方法之前添加该注解即可！**






