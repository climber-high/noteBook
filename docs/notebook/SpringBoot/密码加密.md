### 密码加密

>将密码加密处理，可以有效的防止数据库被外泄时用户账号安全受损，也就是说，即使他人得到了数据库中的信息，也无法获取用户的密码！

如果要保存密码，应该使用**不可逆的运算**！则需要使用到**消息摘要算法**！

**消息摘要算法的特征：**

1. 原始数据相同时，使用同样的摘要算法，得到的摘要必然相同；

2. 使用某一种摘要算法时，无论原始数据长度多少，得到的摘要的长度是固定的，通常，是128~512个二进制数；

3. 原始数据不相同时，使用同样的摘要算法，几乎不会得到相同的摘要。

```
虽然摘要算法存在“不同的原文可以得到相同的摘要”的问题(概率极低)，但是，通常应用于“密码加密”时，并没有
太多密码安全问题的隐患，因为通常都会限制原密码的长度，导致原密码的可能性相对减少，同时，由于摘要算法
结果种类非常之多，所以，极大程度的降低了“原文不同却摘要相同”的概率，所以，在“密码加密”这个问题上，使用
摘要算法是非常安全的！
```

##### 摘要算法主要有SHA(Secure Hash Algorithm)家族算法和MD(Message Digest)系列算法

>例如：SHA-1、SHA-256、SHA-384、SHA-512、MD2、MD4、MD5等。

例:
```
//生成盐值uuid
String salt = UUID.randomUUID().toString();
//基于原密码和盐值进行md5加密处理
String md5Password = getMd5Password("密码",salt);

private String getMd5Password(String password,String salt){
    String str = salt + password + salt;  //密码加盐处理
    for(int i=0;i<5;i++) {   //5次md5加密
        str = DigestUtils.md5DigestAsHex(str.getBytes()).toUpperCase();
    }
    return str;   //返回加密后的密码
}
```

如果是直接进行摘要运算，没有做其它处理，这样的密码依然是不安全的，因为有一些网站使用数据库记录了原文和密文的对应关系，通过数据查询，可以基于密文查询得到对应的原文，当然，这种数据库收录的记录条数是有限的，可以，为了保证密码安全，可以：

1. 要求用户使用强度更高的原始密码，例如长度更长、在密码中添加数字和符号等；

2. 多重加密；

3. 加盐；

4. 综合使用以上方式。

另外，也有关于“王小云教授破解MD5”的报道，在密码学中，关于消息摘要算法的破解其实是“寻找算法中的碰撞概率”，即找到多个不同的原文对应相同的摘要，以128位算法为例，理论上可能需要2的128次方的运算次数，才可以保证100%找到2个不同的原文却对应相同的摘要，通过密码研究可能可以降低运算次数，则某些摘要算法应用于密码加密或类似领域时，就不再安全，如果使用“逆向运算表示破解”的观点去看待这个问题，本身就是对摘要算法的误解。

**由于MD5算法是应用于密码加密较多的摘要算法，所以，在Spring框架中的`DigestUtils`工具中提供了相应的API，却没有其它摘要算法的API，如果需要使用其它摘要算法，可以自行添加`commons-codec`的依赖，该依赖的jar包中也有名为`DigestUtils`的工具类，可以实现各种摘要运算！**








